# 功能测试用例生成器

## 项目简介

AI增强的功能测试用例生成器，支持多种测试方法和真实AI集成，能够自动生成高质量、全覆盖的功能测试用例。

## 核心功能

- 🤖 **AI增强生成** - 集成多种AI服务（OpenAI、Claude、通义千问等）
- 📊 **多种测试方法** - 支持10种测试类型（等价类、边界值、场景法等）
- 🌐 **Web界面操作** - 友好的Web界面，操作简单
- 📁 **多格式导出** - Excel/Markdown格式导出，包含完整标题
- ⚙️ **智能配置管理** - 支持多AI服务配置和自动降级
- 🎯 **100%标题覆盖** - 每个测试用例都有清晰的标题和描述

## 快速开始

### 1. 启动Web服务
```bash
python ai_web_app.py
```

### 2. 访问界面
打开浏览器访问: http://localhost:5001

### 3. 配置AI服务（可选）
- 访问AI配置页面
- 输入API密钥
- 选择AI服务提供商

### 4. 生成测试用例
- 输入需求文档
- 选择增强级别
- 点击生成并下载结果

## 核心文件说明

| 文件 | 功能 |
|------|------|
| `ai_web_app.py` | Web应用主程序，提供Web界面 |
| `comprehensive_test_generator.py` | 全面测试生成器，支持10种测试类型 |
| `ai_test_generator.py` | AI增强生成器，智能分析和生成 |
| `real_ai_generator.py` | 真实AI集成，支持多种AI服务 |
| `ai_config_manager.py` | AI配置管理，支持多服务配置 |
| `test_case_generator.py` | 基础测试生成器，核心算法 |

## 目录结构

```
functionalAItest/
├── ai_web_app.py              # Web应用主程序
├── comprehensive_test_generator.py  # 全面测试生成器
├── ai_test_generator.py       # AI增强生成器
├── real_ai_generator.py       # 真实AI集成
├── ai_config_manager.py       # AI配置管理
├── test_case_generator.py     # 基础测试生成器
├── start_web.bat              # Windows启动脚本
├── config/                    # 配置文件目录
│   ├── ai_config.json         # AI服务配置
│   └── ai_config.db           # 配置数据库
├── docs/                      # 文档目录
├── outputs/                   # 输出文件目录
├── static/                    # 静态资源
├── templates/                 # HTML模板
└── uploads/                   # 上传文件目录
```

## 功能特性

### 🆔 优化的用例编号格式
- **新格式**: `模块英文简写_子模块英文简写_数字编号`
- **示例**: `personal_info_001`, `user_login_002`, `func_core_003`
- **优势**: 简洁易读、便于国际化、格式统一

### 📝 智能测试步骤优化
- **详细步骤描述**: 自动生成具体、详细的测试步骤
- **备选流程说明**: 明确说明备选流程的触发条件和执行路径
- **具体操作指导**: 包含具体的点击、输入、验证等操作描述
- **功能类型适配**: 根据不同功能类型生成相应的测试步骤

#### 步骤优化示例
**优化前**:
```
1. 触发备选流程条件
2. 执行备选路径：个人信息
3. 检查响应结果
```

**优化后**:
```
1. 触发备选流程：直接从网址进入个人信息页面（跳过主页导航）
2. 执行备选路径：点击页面右上角用户头像，选择"个人信息"
3. 检查系统响应：验证HTTP状态码为200，响应时间在可接受范围内，返回数据格式正确，无JavaScript错误
```

#### 编号映射规则
| 中文模块 | 英文简写 | 示例 |
|----------|----------|------|
| 个人中心 | personal | personal_info_001 |
| 用户管理 | user | user_login_002 |
| 功能测试 | func | func_core_003 |
| 界面测试 | ui | ui_element_004 |
| 数据验证 | data | data_required_005 |
| 业务流程 | biz | biz_complete_006 |
| 异常处理 | error | error_network_007 |
| 性能测试 | perf | perf_response_008 |
| 安全测试 | sec | sec_auth_009 |
| 兼容性测试 | compat | compat_browser_010 |

### 测试类型支持
1. **功能测试** - 核心功能、边界功能、功能组合
2. **界面测试** - 界面元素、交互功能、响应式设计、可访问性
3. **数据验证** - 必填验证、格式验证、长度验证、特殊字符
4. **业务流程** - 完整流程、业务规则、流程恢复
5. **异常处理** - 网络异常、服务器异常、数据异常、并发异常
6. **性能测试** - 响应时间、并发性能、内存使用
7. **安全测试** - 权限验证、输入安全、会话安全
8. **兼容性测试** - 浏览器兼容、操作系统兼容
9. **易用性测试** - 用户体验、操作效率
10. **回归测试** - 历史缺陷验证

### AI服务支持
- **OpenAI** - GPT-3.5/GPT-4
- **Anthropic** - Claude系列
- **阿里云** - 通义千问
- **百度** - 文心一言
- **腾讯** - 混元大模型
- **智谱AI** - ChatGLM

### 输出格式
- **Excel格式** - 包含完整的测试用例信息和标题
- **Markdown格式** - 便于阅读和分享的报告格式
- **统计报告** - 测试覆盖度和方法分布统计

## 使用说明

### 基本使用
1. 启动Web服务：`python ai_web_app.py`
2. 访问 http://localhost:5001
3. 在AI生成页面输入需求文档
4. 选择AI增强级别（基础/中等/高级）
5. 可选输入历史缺陷信息
6. 点击生成测试用例
7. 下载Excel和Markdown格式的结果

### AI配置
1. 访问AI配置页面
2. 选择AI服务提供商
3. 输入API密钥和相关配置
4. 测试连接并保存配置
5. 系统会自动使用配置的AI服务

### 高级功能
- **批量生成** - 支持多个需求文档批量处理
- **模板功能** - 预定义的需求模板
- **智能模板** - AI辅助的需求分析和模板生成

## 技术特性

- **智能降级** - AI服务不可用时自动切换到本地生成
- **错误恢复** - 完善的错误处理和恢复机制
- **配置管理** - 支持多种AI服务的配置和切换
- **文件管理** - 自动文件清理和备份机制
- **性能优化** - 高效的测试用例生成算法

## 系统要求

- **Python** 3.8+
- **依赖包**：
  - Flask (Web框架)
  - pandas (数据处理)
  - requests (HTTP请求)
  - openpyxl (Excel处理)

## 安装依赖

```bash
pip install flask pandas requests openpyxl
```

## 配置说明

### AI服务配置
在 `config/ai_config.json` 中配置AI服务：

```json
{
    "provider": "openai",
    "api_key": "your-api-key",
    "base_url": "https://api.openai.com/v1",
    "model": "gpt-3.5-turbo"
}
```

### 支持的AI服务配置
- **OpenAI**: 需要API密钥
- **Claude**: 需要API密钥
- **通义千问**: 需要API密钥
- **其他服务**: 参考docs目录中的配置指南

## 常见问题

### Q: 如何配置AI服务？
A: 访问Web界面的AI配置页面，输入相应的API密钥和配置信息。

### Q: AI服务不可用怎么办？
A: 系统会自动降级到本地生成器，确保功能正常使用。

### Q: 如何提高测试用例质量？
A: 1) 配置AI服务 2) 提供详细的需求文档 3) 输入历史缺陷信息

### Q: 支持哪些输出格式？
A: 支持Excel和Markdown两种格式，都包含完整的测试用例信息。

## 更新日志

### v2.0 (当前版本)
- ✅ 添加了完整的测试用例标题支持
- ✅ 实现了10种测试类型的全覆盖
- ✅ 集成了真实AI服务
- ✅ 优化了Web界面和用户体验
- ✅ 完善了错误处理和降级机制

### v1.0
- 基础测试用例生成功能
- 简单的Web界面
- Excel导出功能

## 许可证

MIT License

## 支持

如有问题或建议，请查看docs目录中的详细文档。
