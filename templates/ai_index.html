{% extends "ai_base.html" %}

{% block title %}AI增强功能测试用例生成器{% endblock %}

{% block content %}
<!-- AI增强欢迎横幅 -->
<div class="jumbotron bg-gradient p-5 rounded-3 mb-5" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
    <div class="container-fluid py-5">
        <h1 class="display-4 fw-bold">
            🤖 AI增强功能测试用例生成器
        </h1>
        <p class="col-md-10 fs-5">
            结合人工智能和8种专业测试设计方法，智能分析需求复杂度、识别风险区域、
            自动优化测试覆盖度，生成更完善、全面的功能测试用例。
        </p>
        <div class="d-flex gap-2 flex-wrap">
            <a class="btn btn-light btn-lg" href="{{ url_for('ai_generate') }}" role="button">
                <i class="bi bi-robot"></i> AI智能生成
            </a>
            <a class="btn btn-outline-light btn-lg" href="{{ url_for('ai_smart_template') }}" role="button">
                <i class="bi bi-lightbulb"></i> AI智能模板
            </a>
            <a class="btn btn-outline-light btn-lg" href="http://localhost:5000/generate" role="button">
                <i class="bi bi-gear"></i> 传统生成
            </a>
        </div>
    </div>
</div>

<!-- AI核心特性 -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-4">
            <i class="bi bi-cpu text-primary"></i> AI核心特性
        </h2>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card feature-card h-100 border-primary">
            <div class="card-body text-center">
                <i class="bi bi-brain display-4 text-primary mb-3"></i>
                <h5 class="card-title">智能需求分析</h5>
                <p class="card-text">
                    AI自动分析需求复杂度、识别风险区域、提取关键路径和业务规则，
                    为测试用例生成提供智能指导
                </p>
                <div class="mt-3">
                    <span class="badge bg-primary me-1">复杂度评分</span>
                    <span class="badge bg-success me-1">风险识别</span>
                    <span class="badge bg-info">路径分析</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card feature-card h-100 border-success">
            <div class="card-body text-center">
                <i class="bi bi-graph-up display-4 text-success mb-3"></i>
                <h5 class="card-title">自适应测试策略</h5>
                <p class="card-text">
                    根据系统复杂度和风险等级，AI自动调整测试策略，
                    优化测试用例组合，提高测试覆盖度和效率
                </p>
                <div class="mt-3">
                    <span class="badge bg-success me-1">动态调整</span>
                    <span class="badge bg-warning me-1">覆盖优化</span>
                    <span class="badge bg-danger">风险优先</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card feature-card h-100 border-warning">
            <div class="card-body text-center">
                <i class="bi bi-shield-check display-4 text-warning mb-3"></i>
                <h5 class="card-title">预测性错误分析</h5>
                <p class="card-text">
                    基于历史缺陷模式和系统特征，AI预测潜在错误场景，
                    生成针对性的回归测试和错误处理测试用例
                </p>
                <div class="mt-3">
                    <span class="badge bg-warning me-1">错误预测</span>
                    <span class="badge bg-info me-1">模式识别</span>
                    <span class="badge bg-secondary">智能回归</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- AI增强测试方法 -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-4">
            <i class="bi bi-gear-wide-connected text-secondary"></i> AI增强测试方法
        </h2>
    </div>
    
    <div class="col-md-6 mb-3">
        <div class="d-flex align-items-center p-3 bg-light rounded">
            <span class="badge bg-primary me-3 fs-6">AI</span>
            <div>
                <strong>智能边界分析</strong>
                <p class="text-muted mb-0 small">基于复杂度动态调整边界值测试策略</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-3">
        <div class="d-flex align-items-center p-3 bg-light rounded">
            <span class="badge bg-success me-3 fs-6">AI</span>
            <div>
                <strong>语义等价类划分</strong>
                <p class="text-muted mb-0 small">基于业务规则的智能等价类识别</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-3">
        <div class="d-flex align-items-center p-3 bg-light rounded">
            <span class="badge bg-info me-3 fs-6">AI</span>
            <div>
                <strong>上下文场景分析</strong>
                <p class="text-muted mb-0 small">基于关键路径的智能场景生成</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-3">
        <div class="d-flex align-items-center p-3 bg-light rounded">
            <span class="badge bg-warning me-3 fs-6">AI</span>
            <div>
                <strong>预测性错误分析</strong>
                <p class="text-muted mb-0 small">基于风险模式的错误场景预测</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-3">
        <div class="d-flex align-items-center p-3 bg-light rounded">
            <span class="badge bg-danger me-3 fs-6">AI</span>
            <div>
                <strong>自适应组合测试</strong>
                <p class="text-muted mb-0 small">根据复杂度自动选择最优组合策略</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-3">
        <div class="d-flex align-items-center p-3 bg-light rounded">
            <span class="badge bg-secondary me-3 fs-6">AI</span>
            <div>
                <strong>基于风险的优先级</strong>
                <p class="text-muted mb-0 small">智能调整测试用例优先级</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-3">
        <div class="d-flex align-items-center p-3 bg-light rounded">
            <span class="badge bg-dark me-3 fs-6">AI</span>
            <div>
                <strong>覆盖度优化</strong>
                <p class="text-muted mb-0 small">自动补充测试用例提高覆盖度</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-3">
        <div class="d-flex align-items-center p-3 bg-light rounded">
            <span class="badge bg-primary me-3 fs-6">AI</span>
            <div>
                <strong>智能回归测试</strong>
                <p class="text-muted mb-0 small">基于缺陷模式的智能回归分析</p>
            </div>
        </div>
    </div>
</div>

<!-- AI分析能力 -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-4">
            <i class="bi bi-search text-info"></i> AI分析能力
        </h2>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-info text-white">
                <h6 class="mb-0"><i class="bi bi-speedometer2"></i> 复杂度分析</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><i class="bi bi-check text-success"></i> 文本长度分析</li>
                    <li><i class="bi bi-check text-success"></i> 业务规则复杂度</li>
                    <li><i class="bi bi-check text-success"></i> 实体关系分析</li>
                    <li><i class="bi bi-check text-success"></i> 集成点识别</li>
                    <li><i class="bi bi-check text-success"></i> 状态转换复杂度</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-warning text-dark">
                <h6 class="mb-0"><i class="bi bi-exclamation-triangle"></i> 风险识别</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><i class="bi bi-shield-x text-danger"></i> 安全风险识别</li>
                    <li><i class="bi bi-speedometer text-warning"></i> 性能风险分析</li>
                    <li><i class="bi bi-database text-info"></i> 数据风险评估</li>
                    <li><i class="bi bi-people text-primary"></i> 可用性风险</li>
                    <li><i class="bi bi-link text-secondary"></i> 集成风险</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-success text-white">
                <h6 class="mb-0"><i class="bi bi-graph-up"></i> 智能优化</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><i class="bi bi-target text-success"></i> 测试覆盖度优化</li>
                    <li><i class="bi bi-sort-numeric-down text-primary"></i> 优先级智能调整</li>
                    <li><i class="bi bi-arrow-repeat text-info"></i> 用例去重优化</li>
                    <li><i class="bi bi-puzzle text-warning"></i> 组合策略选择</li>
                    <li><i class="bi bi-lightbulb text-secondary"></i> 智能建议生成</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- 快速开始 -->
<div class="row">
    <div class="col-12">
        <div class="card bg-gradient text-white" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <div class="card-body text-center py-5">
                <h3><i class="bi bi-rocket"></i> 体验AI增强测试用例生成</h3>
                <p class="lead">选择适合您的AI增强方式，开始生成更智能、更全面的功能测试用例</p>
                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <a href="{{ url_for('professional_generate') }}" class="btn btn-success btn-lg">
                        <i class="bi bi-award"></i> 专业生成
                    </a>
                    <a href="{{ url_for('ai_generate') }}" class="btn btn-light btn-lg">
                        <i class="bi bi-robot"></i> AI智能生成
                    </a>
                    <a href="{{ url_for('ai_smart_template') }}" class="btn btn-outline-light btn-lg">
                        <i class="bi bi-lightbulb"></i> AI智能模板
                    </a>
                    <a href="{{ url_for('ai_config') }}" class="btn btn-outline-light btn-lg">
                        <i class="bi bi-gear"></i> AI配置
                    </a>
                </div>

                <!-- AI状态显示 -->
                <div class="mt-4" id="aiStatus">
                    <div class="d-flex justify-content-center align-items-center">
                        <div class="spinner-border spinner-border-sm text-light me-2" role="status">
                            <span class="visually-hidden">检查AI状态...</span>
                        </div>
                        <small class="text-light">正在检查AI配置状态...</small>
                    </div>
                </div>
                
                <div class="mt-4">
                    <small class="text-light">
                        💡 提示：AI增强模式会自动分析需求复杂度，识别风险区域，优化测试策略
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// 添加动画效果
document.addEventListener('DOMContentLoaded', function() {
    // 特性卡片悬停效果
    const featureCards = document.querySelectorAll('.feature-card');
    featureCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-10px)';
            this.style.boxShadow = '0 10px 25px rgba(0,0,0,0.1)';
        });

        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
        });
    });

    // 检查AI配置状态
    checkAIStatus();
});

function checkAIStatus() {
    fetch('/get_ai_status')
        .then(response => response.json())
        .then(data => {
            const statusDiv = document.getElementById('aiStatus');
            if (data.configured) {
                statusDiv.innerHTML = `
                    <div class="alert alert-success d-inline-flex align-items-center">
                        <i class="bi bi-check-circle-fill me-2"></i>
                        <span>真实AI已配置 - ${data.provider} (${data.model})</span>
                    </div>
                `;
            } else {
                statusDiv.innerHTML = `
                    <div class="alert alert-warning d-inline-flex align-items-center">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i>
                        <span>未配置真实AI，当前使用模拟AI -
                            <a href="{{ url_for('ai_config') }}" class="alert-link">立即配置</a>
                        </span>
                    </div>
                `;
            }
        })
        .catch(error => {
            const statusDiv = document.getElementById('aiStatus');
            statusDiv.innerHTML = `
                <div class="alert alert-secondary d-inline-flex align-items-center">
                    <i class="bi bi-info-circle-fill me-2"></i>
                    <span>无法检查AI状态</span>
                </div>
            `;
        });
}
</script>

<style>
.feature-card {
    transition: all 0.3s ease;
    border-width: 2px;
}

.bg-gradient {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
}

.badge.fs-6 {
    font-size: 0.875rem !important;
    padding: 0.5rem 0.75rem;
}
</style>
{% endblock %}
